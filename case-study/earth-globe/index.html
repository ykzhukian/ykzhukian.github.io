<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=""><title>æ¨¡ä»¿ GitHub é¦–é¡µçš„åœ°çƒ ğŸŒ | å®ˆå¾—äº‘å¼€ä¸è§æœˆ</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/8.0.1/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.1/pure-min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.1/grids-responsive-min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/3.4.1/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><script type="text/javascript" src="//lib.baomitu.com/clipboard.js/2.0.4/clipboard.min.js"></script><script type="text/javascript" src="//lib.baomitu.com/toastr.js/2.1.4/toastr.min.js"></script><link rel="stylesheet" href="//lib.baomitu.com/toastr.js/2.1.4/toastr.min.css"><meta name="generator" content="Hexo 4.2.1"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">æ¨¡ä»¿ GitHub é¦–é¡µçš„åœ°çƒ ğŸŒ</h1><a id="logo" href="/.">å®ˆå¾—äº‘å¼€ä¸è§æœˆ</a><p class="description"></p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> é¦–é¡µ</i></a><a href="/archives/"><i class="fa fa-archive"> å½’æ¡£</i></a><a href="/about/"><i class="fa fa-user"> å…³äº</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">æ¨¡ä»¿ GitHub é¦–é¡µçš„åœ°çƒ ğŸŒ</h1><div class="post-meta">2021-07-01<span> | </span><span class="category"><a href="/categories/Case-Study/">Case Study</a></span></div><a class="disqus-comment-count" data-disqus-identifier="case-study/earth-globe/" href="/case-study/earth-globe/#disqus_thread"></a><div class="post-content"><h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><p>å‚ä¸äº†ä¸€ä¸ªåçˆ¬çš„é¡¹ç›®ï¼Œä¸»è¦åšçš„äº‹æƒ…å°±æ˜¯è¯†åˆ«è¯·æ±‚ä¸­çš„çˆ¬è™«ä»¬ï¼Œå‰ç«¯åˆ™éœ€è¦ä¸€ä¸ªæ•°æ®å¯è§†åŒ–çš„çœ‹æ¿ã€‚ç”±äºçˆ¬è™«æ€»æ˜¯é€šè¿‡ä¸€äº›å¥‡æ€ªçš„ä»£ç†æ‰“æ¥ï¼Œæ‰€ä»¥ipæºåˆ†å¸ƒäºä¸–ç•Œå„åœ°ã€‚<br>ä¸ºäº†å¯ä»¥è®©çœ‹æ¿é…·ä¸€äº›ï¼Œå†³å®šæ¨¡ä»¿ <a href="https://github.com/" target="_blank" rel="noopener">GitHub é¦–é¡µ</a>(é€€å‡ºç™»å½•æ‰èƒ½çœ‹åˆ°) é‚£ä¸ªåœ°çƒåšä¸€ä¸ªç±»ä¼¼çš„æ•ˆæœã€‚</p>
<h2 id="æœ€ç»ˆæ•ˆæœ"><a href="#æœ€ç»ˆæ•ˆæœ" class="headerlink" title="æœ€ç»ˆæ•ˆæœ"></a>æœ€ç»ˆæ•ˆæœ</h2><div class="video-container"><iframe src="https://www.youtube.com/embed/TVsl5djHoVA" frameborder="0" loading="lazy" allowfullscreen></iframe></div>
<h5 id="æ­¤å¤„åº”æœ‰-YouTube-è§†é¢‘-éœ€è¦ğŸªœ"><a href="#æ­¤å¤„åº”æœ‰-YouTube-è§†é¢‘-éœ€è¦ğŸªœ" class="headerlink" title="æ­¤å¤„åº”æœ‰ YouTube è§†é¢‘ éœ€è¦ğŸªœ"></a>æ­¤å¤„åº”æœ‰ YouTube è§†é¢‘ éœ€è¦ğŸªœ</h5><img src="/images/case-study/earth/earth-5.png" alt="æœ€ç»ˆæ•ˆæœ" />

<h2 id="ç”¨åˆ°çš„å·¥å…·"><a href="#ç”¨åˆ°çš„å·¥å…·" class="headerlink" title="ç”¨åˆ°çš„å·¥å…·"></a>ç”¨åˆ°çš„å·¥å…·</h2><p><a href="https://threejs.org" target="_blank" rel="noopener">three.js</a>ã€<a href="https://github.com/tweenjs/tween.js" target="_blank" rel="noopener">tween.js</a> ã€<a href="https://www.typescriptlang.org/" target="_blank" rel="noopener">TypeScript</a></p>
<h2 id="ğŸŒ"><a href="#ğŸŒ" class="headerlink" title="ğŸŒ"></a>ğŸŒ</h2><p>å…¶å®ç®€åŒ–ä¸€ä¸‹åœ°çƒæœ¬åœ°ï¼Œå°±æ˜¯ä¸€ä¸ªçƒä½“ï¼Œå¸¦äº†ä¸–ç•Œåœ°å›¾çš„ç´ æè¡¨é¢ã€ä¸€äº›å‘å…‰çš„æ•ˆæœã€é¼ æ ‡ç‚¹å‡»è½¬åŠ¨ã€è‡ªåŠ¨æ—‹è½¬ã€‚</p>
<h3 id="1-ç»˜åˆ¶ä¸€ä¸ªçƒä½“"><a href="#1-ç»˜åˆ¶ä¸€ä¸ªçƒä½“" class="headerlink" title="1. ç»˜åˆ¶ä¸€ä¸ªçƒä½“"></a>1. ç»˜åˆ¶ä¸€ä¸ªçƒä½“</h3><p>Earth æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ç±»ï¼Œåœ¨å®ƒçš„æ„å»ºå‡½æ•°é‡Œä¼ å…¥å°ºå¯¸ï¼ˆåŠå¾„ï¼‰ã€‚</p>
<p>Earth.ts</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Earth</span> </span>&#123;</span><br><span class="line">  private earth: THREE.Mesh</span><br><span class="line"></span><br><span class="line">  <span class="keyword">constructor</span> (radius: number) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åœ°çƒæœ¬ä½“</span></span><br><span class="line">    <span class="keyword">const</span> earthGeometry = <span class="keyword">new</span> THREE.SphereGeometry(radius, <span class="number">100</span>, <span class="number">100</span>)</span><br><span class="line">    <span class="comment">// æè´¨</span></span><br><span class="line">    <span class="keyword">const</span> meshBasic = <span class="keyword">new</span> THREE.MeshLambertMaterial(&#123; <span class="attr">color</span>: EARTH_COLOR &#125;)</span><br><span class="line">    <span class="keyword">this</span>.earth = <span class="keyword">new</span> THREE.Mesh(earthGeometry, meshBasic)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>è¿™é‡Œåœ¨ Class å†…éƒ¨ä¿å­˜äº†ä¸€ä¸ªç½‘æ ¼å¯¹è±¡ï¼ˆ<a href="https://threejs.org/docs/#api/zh/objects/Mesh" target="_blank" rel="noopener">THREE.Mesh</a>ï¼‰</li>
<li>ç”¨çš„æ˜¯ <a href="https://threejs.org/docs/?q=Material#api/zh/materials/MeshLambertMaterial" target="_blank" rel="noopener">Lambert ç½‘æ ¼æè´¨ (MeshLambertMaterial)</a>ï¼Œå¯ä»¥è®©åœ°çƒåœ¨å…‰æºä¸‹æ›´æœ‰è´¨æ„Ÿä¸€äº›ã€‚</li>
</ul>
<p>App.ts ï¼ˆå…¥å£ä¸»æ–‡ä»¶ï¼‰</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åŸºç¡€çš„èˆå° Class</span></span><br><span class="line"><span class="comment">// é…ç½®ç¯å…‰ã€æ¸²æŸ“æ–¹å¼ã€é¼ æ ‡æ“æ§ã€è‡ªåŠ¨æ—‹è½¬ç­‰ç­‰...</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">App</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span> (parentDom: HTMLElement, size: number) &#123;</span><br><span class="line">    <span class="comment">// é•¿å®½</span></span><br><span class="line">    <span class="keyword">this</span>.containerWidth = size * <span class="number">1.2</span></span><br><span class="line">    <span class="keyword">this</span>.containerHeight = size</span><br><span class="line"></span><br><span class="line">    <span class="comment">// wrapper</span></span><br><span class="line">    <span class="keyword">const</span> container = <span class="built_in">document</span>.createElement(<span class="string">'DIV'</span>)</span><br><span class="line">    container.classList.add(<span class="string">'the-earth-wrapper'</span>)</span><br><span class="line">    container.style.width = <span class="string">`<span class="subst">$&#123;<span class="keyword">this</span>.containerWidth&#125;</span>px`</span></span><br><span class="line">    container.style.height = <span class="string">`<span class="subst">$&#123;<span class="keyword">this</span>.containerHeight&#125;</span>px`</span></span><br><span class="line">    <span class="keyword">const</span> mask = <span class="built_in">document</span>.createElement(<span class="string">'DIV'</span>)</span><br><span class="line">    mask.classList.add(<span class="string">'the-earth-wrapper-mask'</span>)</span><br><span class="line">    mask.style.backgroundImage = <span class="string">`url(<span class="subst">$&#123;flow&#125;</span>)`</span></span><br><span class="line">    container.appendChild(mask)</span><br><span class="line">    parentDom.appendChild(container)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// èˆå°ã€ç›¸æœº</span></span><br><span class="line">    <span class="keyword">this</span>.scene = <span class="keyword">new</span> Scene()</span><br><span class="line">    <span class="keyword">this</span>.camera = <span class="keyword">new</span> PerspectiveCamera(<span class="number">65</span>, <span class="keyword">this</span>.containerWidth / <span class="keyword">this</span>.containerHeight, <span class="number">1</span>, <span class="number">1500</span>)</span><br><span class="line">    <span class="comment">// ç›¸æœºä½ç½®ï¼Œå³æ‰‹åæ ‡ç³»ï¼Œx,y,z</span></span><br><span class="line">    <span class="keyword">this</span>.camera.position.set(<span class="number">-150</span>, <span class="number">100</span>, <span class="number">-200</span>)</span><br><span class="line">    <span class="keyword">this</span>.camera.lookAt(<span class="keyword">new</span> Vector3(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>))</span><br><span class="line">    <span class="comment">// æ¸²æŸ“å™¨</span></span><br><span class="line">    <span class="keyword">this</span>.renderer = <span class="keyword">new</span> WebGLRenderer(&#123; <span class="attr">antialias</span>: <span class="literal">false</span>, <span class="attr">alpha</span>: <span class="literal">true</span> &#125;) <span class="comment">// æŠ—é”¯é½¿</span></span><br><span class="line">    <span class="keyword">this</span>.renderer.setClearColor(<span class="number">0xffffff</span>, <span class="number">0</span>)</span><br><span class="line">    <span class="keyword">this</span>.renderer.autoClear = <span class="literal">false</span></span><br><span class="line">    <span class="keyword">this</span>.renderer.setSize(<span class="keyword">this</span>.containerWidth, <span class="keyword">this</span>.containerHeight)</span><br><span class="line">    <span class="keyword">this</span>.renderer.toneMappingExposure = <span class="built_in">Math</span>.pow(<span class="number">1</span>, <span class="number">4.0</span>)</span><br><span class="line">    container.appendChild(<span class="keyword">this</span>.renderer.domElement)</span><br><span class="line">    <span class="built_in">window</span>.addEventListener(<span class="string">'resize'</span>, () =&gt; <span class="keyword">this</span>.handleWindowResize())</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å…‰æº</span></span><br><span class="line">    <span class="keyword">const</span> spotLight = <span class="keyword">new</span> SpotLight(<span class="number">0x404040</span>, <span class="number">2.5</span>)</span><br><span class="line">    spotLight.target = earth</span><br><span class="line">    <span class="keyword">this</span>.scene.add(spotLight)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> light = <span class="keyword">new</span> AmbientLight(<span class="number">0xffffff</span>, <span class="number">0.25</span>) <span class="comment">// soft white light</span></span><br><span class="line">    <span class="keyword">this</span>.scene.add(light)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åœ°çƒ</span></span><br><span class="line">    <span class="keyword">const</span> theEarth = <span class="keyword">new</span> Earth(<span class="number">100</span>)</span><br><span class="line">    <span class="keyword">const</span> earth = theEarth.getMesh()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.earthGroup = <span class="keyword">new</span> Group()</span><br><span class="line">    <span class="keyword">this</span>.earthGroup.add(earth)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.scene.add(<span class="keyword">this</span>.earthGroup)</span><br><span class="line">    <span class="keyword">this</span>.render()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç›®å‰å¤§æ¦‚æ˜¯è¿™ä¸ªæ ·å­ï¼š<br><img src="/images/case-study/earth/earth-1.png" alt="åœ°çƒå…ƒç´ " /></p>
<h3 id="2-ç»˜åˆ¶ä¸–ç•Œåœ°å›¾"><a href="#2-ç»˜åˆ¶ä¸–ç•Œåœ°å›¾" class="headerlink" title="2. ç»˜åˆ¶ä¸–ç•Œåœ°å›¾"></a>2. ç»˜åˆ¶ä¸–ç•Œåœ°å›¾</h3><p>è¿™é‡Œéœ€è¦å€ŸåŠ©ä¸€ä¸‹ä¸¤ä¸ªå›¾ç‰‡ç´ æï¼š</p>
<ul>
<li>å®Œæ•´çš„ä¸–ç•Œåœ°å›¾.png</li>
<li>åœ†ç‚¹.png</li>
</ul>
<img src="/images/case-study/earth/earth-2.png" alt="ç”¨ä½œçƒå½¢å¤–é¢æè´¨çš„ä¸–ç•Œåœ°å›¾" />
<img src="/images/case-study/earth/dot.png" alt="ç”¨åœ†ç‚¹æ¥ç»˜åˆ¶ä»¥ä¸Šå›¾å½¢" width="30px" style="margin:10px auto 0;" />

<p>Earth.ts ä¸­æ·»åŠ </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Earth</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span> (radius: number) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ... ...</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.earthParticles = <span class="keyword">new</span> THREE.Object3D()</span><br><span class="line">    <span class="comment">// åœ°çƒè¡¨é¢çš„ç‚¹ç‚¹</span></span><br><span class="line">    <span class="keyword">this</span>.earthImg = <span class="built_in">document</span>.createElement(<span class="string">'img'</span>)</span><br><span class="line">    <span class="keyword">this</span>.earthImg.src = earthBg</span><br><span class="line">    <span class="keyword">this</span>.earthImg.onload = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> earthCanvas = <span class="built_in">document</span>.createElement(<span class="string">'canvas'</span>)</span><br><span class="line">      <span class="keyword">const</span> earthCtx = earthCanvas.getContext(<span class="string">'2d'</span>)</span><br><span class="line">      earthCanvas.width = <span class="keyword">this</span>.earthImg.width</span><br><span class="line">      earthCanvas.height = <span class="keyword">this</span>.earthImg.height</span><br><span class="line">      earthCtx?.drawImage(<span class="keyword">this</span>.earthImg, <span class="number">0</span>, <span class="number">0</span>, <span class="keyword">this</span>.earthImg.width, <span class="keyword">this</span>.earthImg.height)</span><br><span class="line">      <span class="keyword">this</span>.earthImgData = earthCtx?.getImageData(<span class="number">0</span>, <span class="number">0</span>, <span class="keyword">this</span>.earthImg.width, <span class="keyword">this</span>.earthImg.height)</span><br><span class="line">      <span class="keyword">this</span>.createEarthParticles()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç®€å•æ¥è¯´å°±æ˜¯è¯»å–ä¸–ç•Œåœ°å›¾åï¼Œ</span></span><br><span class="line">  <span class="comment">// æŠŠæœ‰åƒç´ çš„åœ°æ–¹æ¢æˆåœ†ç‚¹çš„å›¾å½¢æ¥å¡«å……ï¼Œ</span></span><br><span class="line">  <span class="comment">// å¹¶ä¸Šè‰²</span></span><br><span class="line">  private createEarthParticles () &#123;</span><br><span class="line">    <span class="keyword">const</span> positions: any = []</span><br><span class="line">    <span class="keyword">const</span> sizes: any = []</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">2</span>; i++) &#123;</span><br><span class="line">      positions[i] = &#123;</span><br><span class="line">        positions: []</span><br><span class="line">      &#125;</span><br><span class="line">      sizes[i] = &#123;</span><br><span class="line">        sizes: []</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> material = <span class="keyword">new</span> THREE.PointsMaterial()</span><br><span class="line">    material.size = <span class="number">2.5</span></span><br><span class="line">    material.color = <span class="keyword">new</span> THREE.Color(EARTH_PARTICLE_COLOR)</span><br><span class="line">    material.map = <span class="keyword">new</span> THREE.TextureLoader().load(dotImg)</span><br><span class="line">    material.depthWrite = <span class="literal">false</span></span><br><span class="line">    material.transparent = <span class="literal">true</span></span><br><span class="line">    material.opacity = <span class="number">0.3</span></span><br><span class="line">    material.side = THREE.FrontSide</span><br><span class="line">    material.blending = THREE.AdditiveBlending</span><br><span class="line">    <span class="keyword">const</span> spherical = <span class="keyword">new</span> THREE.Spherical()</span><br><span class="line">    spherical.radius = <span class="number">100</span></span><br><span class="line">    <span class="keyword">const</span> step = <span class="number">250</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; step; i++) &#123;</span><br><span class="line">      <span class="keyword">const</span> vec = <span class="keyword">new</span> THREE.Vector3()</span><br><span class="line">      <span class="keyword">const</span> radians = step * (<span class="number">1</span> - <span class="built_in">Math</span>.sin(i / step * <span class="built_in">Math</span>.PI)) / step + <span class="number">0.5</span> <span class="comment">// æ¯ä¸ªçº¬çº¿åœˆå†…çš„è§’åº¦å‡åˆ†</span></span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; step; j += radians) &#123;</span><br><span class="line">        <span class="keyword">const</span> c = j / step <span class="comment">// åº•å›¾ä¸Šçš„æ¨ªå‘ç™¾åˆ†æ¯”</span></span><br><span class="line">        <span class="keyword">const</span> f = i / step <span class="comment">// åº•å›¾ä¸Šçš„çºµå‘ç™¾åˆ†æ¯”</span></span><br><span class="line">        <span class="keyword">const</span> index = <span class="built_in">Math</span>.floor(<span class="number">2</span> * <span class="built_in">Math</span>.random())</span><br><span class="line">        <span class="keyword">const</span> pos = positions[index]</span><br><span class="line">        <span class="keyword">const</span> size = sizes[index]</span><br><span class="line">        <span class="keyword">if</span> (isLandByUV(c, f, &#123; <span class="attr">earthImgData</span>: <span class="keyword">this</span>.earthImgData, <span class="attr">width</span>: <span class="keyword">this</span>.earthImg.width, <span class="attr">height</span>: <span class="keyword">this</span>.earthImg.height &#125;)) &#123; <span class="comment">// æ ¹æ®æ¨ªçºµç™¾åˆ†æ¯”åˆ¤æ–­åœ¨åº•å›¾ä¸­çš„åƒç´ å€¼</span></span><br><span class="line">          spherical.theta = c * <span class="built_in">Math</span>.PI * <span class="number">2</span> - <span class="built_in">Math</span>.PI / <span class="number">2</span> <span class="comment">// æ¨ªçºµç™¾åˆ†æ¯”è½¬æ¢ä¸ºthetaå’Œphiå¤¹è§’</span></span><br><span class="line">          spherical.phi = f * <span class="built_in">Math</span>.PI <span class="comment">// æ¨ªçºµç™¾åˆ†æ¯”è½¬æ¢ä¸ºthetaå’Œphiå¤¹è§’</span></span><br><span class="line">          vec.setFromSpherical(spherical) <span class="comment">// å¤¹è§’è½¬æ¢ä¸ºä¸–ç•Œåæ ‡</span></span><br><span class="line">          pos.positions.push(vec.x)</span><br><span class="line">          pos.positions.push(vec.y)</span><br><span class="line">          pos.positions.push(vec.z)</span><br><span class="line">          <span class="keyword">if</span> (j % <span class="number">3</span> === <span class="number">0</span>) &#123;</span><br><span class="line">            size.sizes.push(<span class="number">6.0</span>)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; positions.length; i++) &#123;</span><br><span class="line">      <span class="keyword">const</span> pos = positions[i]</span><br><span class="line">      <span class="keyword">const</span> size = sizes[i]</span><br><span class="line">      <span class="keyword">const</span> bufferGeom = <span class="keyword">new</span> THREE.BufferGeometry()</span><br><span class="line">      <span class="keyword">const</span> typedArr1 = <span class="keyword">new</span> <span class="built_in">Float32Array</span>(pos.positions.length)</span><br><span class="line">      <span class="keyword">const</span> typedArr2 = <span class="keyword">new</span> <span class="built_in">Float32Array</span>(size.sizes.length)</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; pos.positions.length; j++) &#123;</span><br><span class="line">        typedArr1[j] = pos.positions[j]</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; size.sizes.length; j++) &#123;</span><br><span class="line">        typedArr2[j] = size.sizes[j]</span><br><span class="line">      &#125;</span><br><span class="line">      bufferGeom.setAttribute(<span class="string">'position'</span>, <span class="keyword">new</span> THREE.BufferAttribute(typedArr1, <span class="number">3</span>))</span><br><span class="line">      bufferGeom.setAttribute(<span class="string">'size'</span>, <span class="keyword">new</span> THREE.BufferAttribute(typedArr2, <span class="number">1</span>))</span><br><span class="line">      bufferGeom.computeBoundingSphere()</span><br><span class="line">      <span class="keyword">const</span> particle = <span class="keyword">new</span> THREE.Points(bufferGeom, material)</span><br><span class="line">      <span class="keyword">this</span>.earthParticles.add(particle)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ•ˆæœï¼š<br><img src="/images/case-study/earth/earth-3.png" alt="ç»˜åˆ¶ä¸–ç•Œåœ°å›¾" /></p>
<h3 id="3-åŠ å…¥é¼ æ ‡æ§åˆ¶ï¼Œæ‹–åŠ¨å¯ä»¥æ—‹è½¬åœ°çƒ"><a href="#3-åŠ å…¥é¼ æ ‡æ§åˆ¶ï¼Œæ‹–åŠ¨å¯ä»¥æ—‹è½¬åœ°çƒ" class="headerlink" title="3. åŠ å…¥é¼ æ ‡æ§åˆ¶ï¼Œæ‹–åŠ¨å¯ä»¥æ—‹è½¬åœ°çƒ"></a>3. åŠ å…¥é¼ æ ‡æ§åˆ¶ï¼Œæ‹–åŠ¨å¯ä»¥æ—‹è½¬åœ°çƒ</h3><p>App.ts ä¸­æ·»åŠ </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> </span>&#123;</span><br><span class="line">  private controls: OrbitControls</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">constructor</span> (parentDom: HTMLElement, size: number) &#123;</span><br><span class="line">  <span class="comment">// è½¨è¿¹ï¼Œé¼ æ ‡æ§åˆ¶</span></span><br><span class="line">  <span class="keyword">this</span>.controls = <span class="keyword">new</span> OrbitControls(<span class="keyword">this</span>.camera, <span class="keyword">this</span>.renderer.domElement)</span><br><span class="line">  <span class="keyword">this</span>.controls.enableZoom = <span class="literal">false</span></span><br><span class="line">  <span class="keyword">this</span>.controls.minDistance = <span class="number">320</span></span><br><span class="line">  <span class="keyword">this</span>.controls.maxDistance = <span class="number">320</span></span><br><span class="line">  <span class="keyword">this</span>.controls.maxPolarAngle = <span class="number">1.5</span></span><br><span class="line">  <span class="keyword">this</span>.controls.minPolarAngle = <span class="number">1</span></span><br><span class="line">  <span class="keyword">this</span>.controls.enablePan = <span class="literal">false</span></span><br><span class="line">  <span class="keyword">this</span>.controls.enableDamping = <span class="literal">true</span></span><br><span class="line">  <span class="keyword">this</span>.controls.dampingFactor = <span class="number">0.05</span></span><br><span class="line">  <span class="keyword">this</span>.controls.rotateSpeed = <span class="number">0.5</span></span><br><span class="line">  <span class="keyword">this</span>.controls.addEventListener(<span class="string">'change'</span>, () =&gt; &#123;</span><br><span class="line">    spotLight.position.copy(<span class="keyword">this</span>.camera.position)</span><br><span class="line">    earthGlow.lookAt(<span class="keyword">new</span> Vector3(<span class="keyword">this</span>.camera.position.x - <span class="number">25</span>, <span class="keyword">this</span>.camera.position.y - <span class="number">50</span>, <span class="keyword">this</span>.camera.position.z + <span class="number">20</span>))</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// render ä¸­æ·»åŠ  this.controls.update() æ‰ä¼šç”Ÿæ•ˆï¼Œå¹¶è®©æ—‹è½¬å˜å¾—å¾ˆä¸æ»‘</span></span><br><span class="line">render () &#123;</span><br><span class="line">  <span class="keyword">this</span>.controls.update()</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è¿™æ˜¯è®©åœ°çƒè¿›è¡Œè‡ªåŠ¨æ—‹è½¬</span></span><br><span class="line">  <span class="keyword">this</span>.earthGroup.rotation.y += <span class="number">0.0003</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ•ˆæœï¼š<br><img src="/images/case-study/earth/earth-4.gif" alt="é¼ æ ‡æ§åˆ¶åœ°çƒæ—‹è½¬" /></p>
<h2 id="ğŸ“"><a href="#ğŸ“" class="headerlink" title="ğŸ“"></a>ğŸ“</h2><h3 id="4-åŠ å…¥åŸå¸‚åæ ‡"><a href="#4-åŠ å…¥åŸå¸‚åæ ‡" class="headerlink" title="4. åŠ å…¥åŸå¸‚åæ ‡"></a>4. åŠ å…¥åŸå¸‚åæ ‡</h3><p>åŸå¸‚åæ ‡ï¼Œä¸€ä¸ªå°æ†å­å‡èµ·ï¼Œé¡¶éƒ¨æœ‰ä¸ªå°æ–¹å—ã€‚<br>ç”¨æ¥æ ‡è®°åŸå¸‚çš„ä½ç½®ï¼Œä¼ å‚åªéœ€ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯åæ ‡ç»çº¬åº¦ï¼Œä¸€ä¸ªæ˜¯åŸå¸‚åç§°ã€‚<br>å”¯ä¸€éº»çƒ¦çš„åœ¨äºå°†ç»çº¬åº¦è½¬åˆ°åœºæ™¯ä¸­å¯¹åº”çš„ä½ç½®ã€‚</p>
<p>City.ts</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> THREE <span class="keyword">from</span> <span class="string">'three'</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> TWEEN <span class="keyword">from</span> <span class="string">'@tweenjs/tween.js'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> CITY_COLOR = <span class="number">0x00DDFF</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">City</span> </span>&#123;</span><br><span class="line">  private position: THREE.Vector3</span><br><span class="line">  private cityGroup: THREE.Group</span><br><span class="line">  private name: string</span><br><span class="line">  private font: THREE.Font</span><br><span class="line">  private cityName?: THREE.Mesh</span><br><span class="line"></span><br><span class="line">  <span class="keyword">constructor</span> ([lng, lat]: number[], name: string, font: THREE.Font) &#123;</span><br><span class="line">    <span class="keyword">this</span>.cityGroup = <span class="keyword">new</span> THREE.Group()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> position = <span class="keyword">this</span>.createPosition([lng, lat])</span><br><span class="line">    <span class="keyword">this</span>.position = position</span><br><span class="line">    <span class="keyword">this</span>.name = name</span><br><span class="line">    <span class="keyword">this</span>.font = font</span><br><span class="line">    <span class="keyword">this</span>.createBox(position)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  private createBox (position: THREE.Vector3) &#123;</span><br><span class="line">    <span class="keyword">const</span> geometry = <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">0.5</span>, <span class="number">0.5</span>, <span class="number">10</span>)</span><br><span class="line">    <span class="keyword">const</span> material = <span class="keyword">new</span> THREE.MeshBasicMaterial(&#123;</span><br><span class="line">      color: CITY_COLOR,</span><br><span class="line">      side: THREE.DoubleSide,</span><br><span class="line">      opacity: <span class="number">0.5</span>,</span><br><span class="line">      transparent: <span class="literal">true</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">const</span> box = <span class="keyword">new</span> THREE.Mesh(geometry, material)</span><br><span class="line">    box.position.copy(position)</span><br><span class="line">    box.lookAt(<span class="keyword">new</span> THREE.Vector3(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>))</span><br><span class="line">    <span class="keyword">this</span>.cityGroup.add(box)</span><br><span class="line">    <span class="comment">// é¡¶éƒ¨</span></span><br><span class="line">    <span class="keyword">const</span> geometryTop = <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">0.6</span>, <span class="number">0.6</span>, <span class="number">0.6</span>)</span><br><span class="line">    <span class="keyword">const</span> materialTop = <span class="keyword">new</span> THREE.MeshBasicMaterial(&#123;</span><br><span class="line">      color: <span class="number">0xffffff</span>,</span><br><span class="line">      side: THREE.DoubleSide,</span><br><span class="line">      opacity: <span class="number">0.5</span>,</span><br><span class="line">      transparent: <span class="literal">true</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">const</span> boxTop = <span class="keyword">new</span> THREE.Mesh(geometryTop, materialTop)</span><br><span class="line">    boxTop.lookAt(<span class="keyword">new</span> THREE.Vector3(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åº•éƒ¨å‡èµ·</span></span><br><span class="line">    <span class="keyword">const</span> boxDepth = &#123; <span class="attr">value</span>: <span class="number">0.95</span> &#125;</span><br><span class="line">    <span class="keyword">const</span> tweenRise = <span class="keyword">new</span> TWEEN.Tween(boxDepth).to(&#123; <span class="attr">value</span>: <span class="number">1</span> &#125;, <span class="number">3000</span>)</span><br><span class="line">    tweenRise.onUpdate(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      box.position.set(position.x * boxDepth.value, position.y * boxDepth.value, position.z * boxDepth.value)</span><br><span class="line">    &#125;)</span><br><span class="line">    tweenRise.start()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é¡¶éƒ¨ä¸Šä¸‹æµ®åŠ¨</span></span><br><span class="line">    <span class="keyword">const</span> scale = &#123; <span class="attr">value</span>: <span class="number">1.06</span> &#125;</span><br><span class="line">    <span class="keyword">const</span> tween = <span class="keyword">new</span> TWEEN.Tween(scale).to(&#123; <span class="attr">value</span>: <span class="number">1.07</span> &#125;, <span class="number">2000</span>)</span><br><span class="line">    <span class="keyword">const</span> tweenBack = <span class="keyword">new</span> TWEEN.Tween(scale).to(&#123; <span class="attr">value</span>: <span class="number">1.06</span> &#125;, <span class="number">2000</span>)</span><br><span class="line">    tween.onUpdate(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      boxTop.position.set(position.x * scale.value, position.y * scale.value, position.z * scale.value)</span><br><span class="line">    &#125;)</span><br><span class="line">    tweenBack.onUpdate(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      boxTop.position.set(position.x * scale.value, position.y * scale.value, position.z * scale.value)</span><br><span class="line">    &#125;)</span><br><span class="line">    tween.chain(tweenBack)</span><br><span class="line">    tweenBack.chain(tween)</span><br><span class="line">    tween.delay(<span class="number">3000</span>).start()</span><br><span class="line">    <span class="keyword">this</span>.cityGroup.add(boxTop)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åŸå¸‚åå­—</span></span><br><span class="line">    <span class="keyword">this</span>.createCityName(<span class="keyword">this</span>.name, position)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  private <span class="keyword">async</span> createCityName (name: string, <span class="attr">position</span>: THREE.Vector3) &#123;</span><br><span class="line">    <span class="keyword">const</span> cityNameGeometry = <span class="keyword">new</span> THREE.TextGeometry(name, &#123;</span><br><span class="line">      font: <span class="keyword">this</span>.font,</span><br><span class="line">      size: <span class="number">3</span>,</span><br><span class="line">      height: <span class="number">1</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">    cityNameGeometry.computeBoundingBox ()</span><br><span class="line">    <span class="keyword">const</span> cityNameMesh = <span class="keyword">new</span> THREE.MeshLambertMaterial(&#123;</span><br><span class="line">      color: <span class="number">0xffffff</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">const</span> cityName = <span class="keyword">new</span> THREE.Mesh(cityNameGeometry, cityNameMesh)</span><br><span class="line">    cityName.position.set(position.x - <span class="number">5</span>, position.y - <span class="number">5</span>, position.z - <span class="number">5</span>)</span><br><span class="line">    <span class="comment">// å‡ºç°</span></span><br><span class="line">    <span class="keyword">const</span> opacity = &#123; <span class="attr">value</span>: <span class="number">0</span> &#125;</span><br><span class="line">    <span class="keyword">const</span> tween = <span class="keyword">new</span> TWEEN.Tween(opacity).to(&#123; <span class="attr">value</span>: <span class="number">1.2</span> &#125;, <span class="number">1000</span>)</span><br><span class="line">    tween.onUpdate(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      cityName.position.set(position.x * opacity.value, position.y * opacity.value, position.z * opacity.value)</span><br><span class="line">    &#125;)</span><br><span class="line">    tween.start()</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">this</span>.cityGroup.add(cityName)</span><br><span class="line">    <span class="keyword">this</span>.cityName = cityName</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  private createPosition (lnglat: number[]) &#123;</span><br><span class="line">    <span class="keyword">const</span> spherical = <span class="keyword">new</span> THREE.Spherical()</span><br><span class="line">    spherical.radius = <span class="number">100</span></span><br><span class="line">    <span class="keyword">const</span> lng = lnglat[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">const</span> lat = lnglat[<span class="number">1</span>]</span><br><span class="line">    <span class="keyword">const</span> theta = (lng + <span class="number">90</span>) * (<span class="built_in">Math</span>.PI / <span class="number">180</span>)</span><br><span class="line">    <span class="keyword">const</span> phi = (<span class="number">90</span> - lat) * (<span class="built_in">Math</span>.PI / <span class="number">180</span>)</span><br><span class="line">    spherical.phi = phi</span><br><span class="line">    spherical.theta = theta</span><br><span class="line">    <span class="keyword">const</span> position = <span class="keyword">new</span> THREE.Vector3()</span><br><span class="line">    position.setFromSpherical(spherical)</span><br><span class="line">    <span class="keyword">return</span> position</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  getMesh () &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.cityGroup</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  getPosition () &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.position</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  updateCityNameDirection (position: THREE.Vector3) &#123;</span><br><span class="line">    <span class="keyword">this</span>.cityName?.lookAt(position)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  destroy () &#123;</span><br><span class="line">    <span class="keyword">this</span>.cityGroup.clear()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/images/case-study/earth/earth-6.png" alt="åŸå¸‚åæ ‡" style="width:200px;margin:auto;" />

<h2 id="ğŸ’«"><a href="#ğŸ’«" class="headerlink" title="ğŸ’«"></a>ğŸ’«</h2><h3 id="5-åˆ›å»ºä»ä¸€ä¸ªåæ ‡åˆ°å¦ä¸€ä¸ªå·¦è¾¹è¿æ¥çš„è´å¡å°”æ›²çº¿"><a href="#5-åˆ›å»ºä»ä¸€ä¸ªåæ ‡åˆ°å¦ä¸€ä¸ªå·¦è¾¹è¿æ¥çš„è´å¡å°”æ›²çº¿" class="headerlink" title="5. åˆ›å»ºä»ä¸€ä¸ªåæ ‡åˆ°å¦ä¸€ä¸ªå·¦è¾¹è¿æ¥çš„è´å¡å°”æ›²çº¿"></a>5. åˆ›å»ºä»ä¸€ä¸ªåæ ‡åˆ°å¦ä¸€ä¸ªå·¦è¾¹è¿æ¥çš„è´å¡å°”æ›²çº¿</h3><p>ä¼ å‚å³ä¸ºä¸¤ä¸ªåŸå¸‚ï¼ˆåæ ‡ï¼‰ï¼Œç„¶åå®ç°åŠ¨ç”»ä»åæ ‡1åˆ°åæ ‡2ã€‚<br>éº»çƒ¦çš„ç‚¹å°±æ˜¯è°ƒè¯•æ›²çº¿å¼§åº¦ï¼Œå¥½åœ¨Three.jsæœ‰å¾ˆå¤šç°æœ‰æ¥å£ã€‚<br>ç”±äºå®é™…è¯·æ±‚éå¸¸å¤šï¼Œ</p>
<p>Link.ts</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> THREE <span class="keyword">from</span> <span class="string">'three'</span></span><br><span class="line"><span class="comment">// @ts-ignore</span></span><br><span class="line"><span class="keyword">import</span> &#123; MeshLine, MeshLineMaterial &#125; <span class="keyword">from</span> <span class="string">'../lib/meshLine'</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> TWEEN <span class="keyword">from</span> <span class="string">'@tweenjs/tween.js'</span></span><br><span class="line"><span class="keyword">import</span> City <span class="keyword">from</span> <span class="string">'./City'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> LINK_COLOR = <span class="number">0x00DDFF</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Link</span> </span>&#123;</span><br><span class="line">  private city1: City</span><br><span class="line">  private city2: City</span><br><span class="line">  private linkGroup: THREE.Group</span><br><span class="line"></span><br><span class="line">  <span class="keyword">constructor</span> (city1: City, city2: City) &#123;</span><br><span class="line">    <span class="keyword">this</span>.city1 = city1</span><br><span class="line">    <span class="keyword">this</span>.city2 = city2</span><br><span class="line">    <span class="keyword">this</span>.linkGroup = <span class="keyword">new</span> THREE.Group()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.drawLine()</span><br><span class="line">    <span class="keyword">this</span>.drawRing()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  drawLine = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> v0 = <span class="keyword">this</span>.city1.getPosition()</span><br><span class="line">    <span class="keyword">const</span> v3 = <span class="keyword">this</span>.city2.getPosition()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> curve</span><br><span class="line">    <span class="keyword">const</span> angle = v0.angleTo(v3)</span><br><span class="line">    <span class="keyword">if</span> (angle &gt; <span class="number">1</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; v1, v2 &#125; = getBezierPoint(v0, v3)</span><br><span class="line">      curve = <span class="keyword">new</span> THREE.CubicBezierCurve3(v0, v1, v2, v3) <span class="comment">// ä¸‰ç»´ä¸‰æ¬¡è´èµ›å°”æ›²çº¿</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> p0 = <span class="keyword">new</span> THREE.Vector3(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>) <span class="comment">// æ³•çº¿å‘é‡</span></span><br><span class="line">      <span class="keyword">const</span> rayLine = <span class="keyword">new</span> THREE.Ray(p0, getVCenter(v0.clone(), v3.clone())) <span class="comment">// é¡¶ç‚¹åæ ‡</span></span><br><span class="line">      <span class="keyword">const</span> vtop = rayLine.at(<span class="number">1.3</span>, <span class="keyword">new</span> THREE.Vector3()) <span class="comment">// ä½ç½®</span></span><br><span class="line">      curve = <span class="keyword">new</span> THREE.QuadraticBezierCurve3(v0, vtop, v3) <span class="comment">// ä¸‰ç»´äºŒæ¬¡è´èµ›å°”æ›²çº¿</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> curvePoints = curve.getPoints(<span class="number">100</span>)</span><br><span class="line">    <span class="keyword">const</span> material = <span class="keyword">new</span> MeshLineMaterial(&#123;</span><br><span class="line">      color: LINK_COLOR,</span><br><span class="line">      opacity: <span class="number">0.7</span>,</span><br><span class="line">      transparent: <span class="literal">true</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">const</span> lineLength = &#123; <span class="attr">value</span>: <span class="number">0</span> &#125;</span><br><span class="line">    <span class="keyword">const</span> line = <span class="keyword">new</span> MeshLine()</span><br><span class="line">    <span class="keyword">const</span> drawLineTween = <span class="keyword">new</span> TWEEN.Tween(lineLength).to(&#123; <span class="attr">value</span>: <span class="number">100</span> &#125;, <span class="number">3000</span>)</span><br><span class="line">    drawLineTween.onUpdate(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      line.setPoints(curvePoints.slice(<span class="number">0</span>, lineLength.value + <span class="number">1</span>), (p: number) =&gt; <span class="number">0.2</span> + p / <span class="number">2</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">const</span> eraseLineTween = <span class="keyword">new</span> TWEEN.Tween(lineLength).to(&#123; <span class="attr">value</span>: <span class="number">0</span> &#125;, <span class="number">3000</span>)</span><br><span class="line">    eraseLineTween.onUpdate(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      line.setPoints(curvePoints.slice(curvePoints.length - lineLength.value, curvePoints.length), (p: number) =&gt; <span class="number">0.2</span> + p / <span class="number">2</span>)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    drawLineTween.start()</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> eraseLineTween.start(), <span class="number">6000</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh(line, material)</span><br><span class="line">    <span class="keyword">this</span>.linkGroup.add(mesh)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  drawRing () &#123;</span><br><span class="line">    <span class="comment">// æ‰©</span></span><br><span class="line">    <span class="keyword">const</span> outter = <span class="keyword">new</span> THREE.RingGeometry(<span class="number">1</span>, <span class="number">1.3</span>, <span class="number">15</span>)</span><br><span class="line">    <span class="keyword">const</span> materialOutter = <span class="keyword">new</span> THREE.MeshBasicMaterial(&#123;</span><br><span class="line">      color: LINK_COLOR,</span><br><span class="line">      side: THREE.DoubleSide,</span><br><span class="line">      opacity: <span class="number">0</span>,</span><br><span class="line">      transparent: <span class="literal">true</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">const</span> ringOutter = <span class="keyword">new</span> THREE.Mesh(outter, materialOutter)</span><br><span class="line">    ringOutter.position.copy(<span class="keyword">this</span>.city2.getPosition())</span><br><span class="line">    ringOutter.lookAt(<span class="keyword">new</span> THREE.Vector3(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>))</span><br><span class="line">    <span class="keyword">const</span> ringScale = &#123; <span class="attr">value</span>: <span class="number">1</span> &#125;</span><br><span class="line">    <span class="keyword">const</span> drawRingTween = <span class="keyword">new</span> TWEEN.Tween(ringScale).to(&#123; <span class="attr">value</span>: <span class="number">1.1</span> &#125;, <span class="number">200</span>)</span><br><span class="line">    drawRingTween.onUpdate(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      materialOutter.opacity = <span class="number">0.5</span></span><br><span class="line">      ringOutter.scale.set(ringScale.value, ringScale.value, ringScale.value)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">const</span> drawRingTweenBack = <span class="keyword">new</span> TWEEN.Tween(ringScale).to(&#123; <span class="attr">value</span>: <span class="number">1</span> &#125;, <span class="number">1000</span>)</span><br><span class="line">    drawRingTweenBack.onUpdate(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      materialOutter.opacity = ringScale.value - <span class="number">1</span></span><br><span class="line">    &#125;)</span><br><span class="line">    drawRingTween.easing(TWEEN.Easing.Circular.Out).delay(<span class="number">3000</span>).chain(drawRingTweenBack.easing(TWEEN.Easing.Circular.In)).start()</span><br><span class="line">    <span class="keyword">this</span>.linkGroup.add(ringOutter)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  getMesh () &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.linkGroup</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  destroy () &#123;</span><br><span class="line">    <span class="keyword">this</span>.linkGroup.clear()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getBezierPoint</span> (<span class="params">v0: THREE.Vector3, v3: THREE.Vector3</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> angle = (v0.angleTo(v3) * <span class="number">180</span>) / <span class="built_in">Math</span>.PI <span class="comment">// 0 ~ Math.PI       // è®¡ç®—å‘é‡å¤¹è§’</span></span><br><span class="line">  <span class="keyword">const</span> aLen = angle</span><br><span class="line">  <span class="keyword">const</span> p0 = <span class="keyword">new</span> THREE.Vector3(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>) <span class="comment">// æ³•çº¿å‘é‡</span></span><br><span class="line">  <span class="keyword">const</span> rayLine = <span class="keyword">new</span> THREE.Ray(p0, getVCenter(v0.clone(), v3.clone())) <span class="comment">// é¡¶ç‚¹åæ ‡</span></span><br><span class="line">  <span class="keyword">const</span> vtop = <span class="keyword">new</span> THREE.Vector3(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>) <span class="comment">// æ³•çº¿å‘é‡</span></span><br><span class="line">  rayLine.at(<span class="number">100</span>, vtop) <span class="comment">// ä½ç½®</span></span><br><span class="line">  <span class="comment">// æ§åˆ¶ç‚¹åæ ‡</span></span><br><span class="line">  <span class="keyword">const</span> v1 = getLenVcetor(v0.clone(), vtop, aLen)</span><br><span class="line">  <span class="keyword">const</span> v2 = getLenVcetor(v3.clone(), vtop, aLen)</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    v1: v1,</span><br><span class="line">    v2: v2</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getVCenter</span> (<span class="params">v1: THREE.Vector3, v2: THREE.Vector3</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> v = v1.add(v2)</span><br><span class="line">  <span class="keyword">return</span> v.divideScalar(<span class="number">2</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getLenVcetor</span> (<span class="params">v1: THREE.Vector3, v2: THREE.Vector3, len: number</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> v1v2Len = v1.distanceTo(v2)</span><br><span class="line">  <span class="keyword">return</span> v1.lerp(v2, len / v1v2Len)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/images/case-study/earth/earth-7.png" alt="è¿çº¿" style="width:200px;margin:auto;" />


<h2 id="åŠ ä¸€ç‚¹å…‰æ™•-ğŸª"><a href="#åŠ ä¸€ç‚¹å…‰æ™•-ğŸª" class="headerlink" title="åŠ ä¸€ç‚¹å…‰æ™• ğŸª"></a>åŠ ä¸€ç‚¹å…‰æ™• ğŸª</h2><p>Earth.ts ä¸­æ·»åŠ </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ°çƒå…‰æ™•</span></span><br><span class="line"><span class="keyword">const</span> geometry = <span class="keyword">new</span> THREE.CircleGeometry(radius + <span class="number">1.5</span>, radius)</span><br><span class="line"><span class="keyword">const</span> material = <span class="keyword">new</span> THREE.MeshBasicMaterial(&#123; <span class="attr">color</span>: <span class="number">0xd7fcf6</span>, <span class="attr">side</span>: THREE.DoubleSide &#125;)</span><br><span class="line"><span class="keyword">const</span> material2 = <span class="keyword">new</span> THREE.MeshBasicMaterial(&#123; <span class="attr">color</span>: <span class="number">0xd1bdff</span>, <span class="attr">side</span>: THREE.DoubleSide &#125;)</span><br><span class="line"><span class="keyword">const</span> circle = <span class="keyword">new</span> THREE.Mesh(geometry, material)</span><br><span class="line"><span class="keyword">const</span> circle2 = <span class="keyword">new</span> THREE.Mesh(geometry, material2)</span><br><span class="line"><span class="keyword">const</span> glowGrop = <span class="keyword">new</span> THREE.Group()</span><br><span class="line">circle.layers.set(<span class="number">1</span>)</span><br><span class="line">circle2.layers.set(<span class="number">1</span>)</span><br><span class="line">glowGrop.add(circle)</span><br><span class="line">glowGrop.add(circle2)</span><br><span class="line"><span class="keyword">this</span>.earthGlow = glowGrop</span><br></pre></td></tr></table></figure>

<img src="/images/case-study/earth/earth-8.png" alt="åœ°çƒå…‰æ™•" style="width:400px;margin:auto;" />


<h2 id="End"><a href="#End" class="headerlink" title="End."></a>End.</h2><p>åˆ°è¿™åŸºæœ¬ä¸Šå°±å®Œæˆäº†ï¼Œç”±äºåçˆ¬ç›‘æ§è¯·æ±‚é‡å·¨å¤§ï¼Œå…¨éƒ½æ˜¾ç¤ºé£æ‰‡ä¼šèµ·é£ï¼Œæ‰€ä»¥è¦èŠ‚æµä¸€ä¸‹ï¼Œæœ€åå…¶å®ä¹Ÿåªæ˜¾ç¤ºäº†å¾ˆå°‘ä¸€éƒ¨åˆ†ï¼Œçœ‹ä¸ªçƒ­é—¹ã€‚</p>
</div><div class="tags"><a href="/tags/JavaScript/"><i class="fa fa-tag"></i>JavaScript</a><a href="/tags/Tools/"><i class="fa fa-tag"></i>Tools</a></div><div class="post-nav"><a class="pre" href="/case-study/spider-challenge/">çˆ¬è™«æ”»é˜²æˆ˜ ğŸ•·</a><a class="next" href="/fe/JavaScript/13.first-time-vite/">Vite è¸©å‘</a></div><div id="disqus_thread"><div class="btn_click_load"><button class="disqus_click_btn">é˜…è¯»è¯„è®ºï¼ˆè¯·ç¡®ä¿ Disqus å¯ä»¥æ­£å¸¸åŠ è½½ï¼‰</button></div><script type="text/javascript">var disqus_config = function () {
    this.page.url = 'https://ykzhukian.github.io/case-study/earth-globe/';
    this.page.identifier = 'case-study/earth-globe/';
    this.page.title = 'æ¨¡ä»¿ GitHub é¦–é¡µçš„åœ°çƒ ğŸŒ';
  };</script><script type="text/javascript" id="disqus-lazy-load-script">$.ajax({
url: 'https://disqus.com/next/config.json',
timeout: 2500,
type: 'GET',
success: function(){
  var d = document;
  var s = d.createElement('script');
  s.src = '//ykzhukian-github-io.disqus.com/embed.js';
  s.setAttribute('data-timestamp', + new Date());
  (d.head || d.body).appendChild(s);
  $('.disqus_click_btn').css('display', 'none');
},
error: function() {
  $('.disqus_click_btn').css('display', 'block');
}
});</script><script type="text/javascript" id="disqus-click-load">$('.btn_click_load').click(() => {  //click to load comments
    (() => { // DON'T EDIT BELOW THIS LINE
        var d = document;
        var s = d.createElement('script');
        s.src = '//ykzhukian-github-io.disqus.com/embed.js';
        s.setAttribute('data-timestamp', + new Date());
        (d.head || d.body).appendChild(s);
    })();
    $('.disqus_click_btn').css('display','none');
});</script><script type="text/javascript" id="disqus-count-script">$(function() {
     var xhr = new XMLHttpRequest();
     xhr.open('GET', '//disqus.com/next/config.json', true);
     xhr.timeout = 2500;
     xhr.onreadystatechange = function () {
       if (xhr.readyState === 4 && xhr.status === 200) {
         $('.post-meta .post-comments-count').show();
         var s = document.createElement('script');
         s.id = 'dsq-count-scr';
         s.src = 'https://ykzhukian-github-io.disqus.com/count.js';
         s.async = true;
         (document.head || document.body).appendChild(s);
       }
     };
     xhr.ontimeout = function () { xhr.abort(); };
     xhr.send(null);
   });
</script></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> åˆ†ç±»</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Case-Study/">Case Study</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Development/">Development</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Noncence/">Noncence</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Photograph/">Photograph</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Reading-Notes/">Reading Notes</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> æ ‡ç­¾</i></div><div class="tagcloud"><a href="/tags/JavaScript/" style="font-size: 15px;">JavaScript</a> <a href="/tags/React/" style="font-size: 15px;">React</a> <a href="/tags/DevOps/" style="font-size: 15px;">DevOps</a> <a href="/tags/Tools/" style="font-size: 15px;">Tools</a> <a href="/tags/Read/" style="font-size: 15px;">Read</a> <a href="/tags/Git/" style="font-size: 15px;">Git</a> <a href="/tags/Vue/" style="font-size: 15px;">Vue</a> <a href="/tags/Webpack/" style="font-size: 15px;">Webpack</a> <a href="/tags/CSS/" style="font-size: 15px;">CSS</a> <a href="/tags/Design/" style="font-size: 15px;">Design</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> æœ€è¿‘æ–‡ç« </i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/noncence/20220202-daily/">PR è¿‡æœŸäº†</a></li><li class="post-list-item"><a class="post-list-link" href="/fe/JavaScript/14.mouse-track/">å‰ç«¯åçˆ¬ï¼šé¼ æ ‡è½¨è¿¹</a></li><li class="post-list-item"><a class="post-list-link" href="/noncence/20220127-daily/">å¬äº†è€æ¿å»ºç¡•çš„ä¸€ä¸ªåˆ†äº«</a></li><li class="post-list-item"><a class="post-list-link" href="/webpack/3.webpack-base/">ä¸€äº› Webpack ç›¸å…³å¤‡å¿˜</a></li><li class="post-list-item"><a class="post-list-link" href="/photo/2.2022-qingdao/">é’å²›è·¨å¹´</a></li><li class="post-list-item"><a class="post-list-link" href="/fe/Engineering/1.private-npm-nexus/">ç§æœ‰ npm ä»“åº“ Nexus & å·¥å…·åº“é…åˆ GitLab è‡ªåŠ¨å‘å¸ƒ</a></li><li class="post-list-item"><a class="post-list-link" href="/reading/7.meituan-micro-fe/">ç¨€åœŸå¤§ä¼šè®°å½•</a></li><li class="post-list-item"><a class="post-list-link" href="/case-study/shield/">ç™¾å§“ç½‘åçˆ¬è™«ç³»ç»Ÿï¼šç¥ç›¾ç®¡ç†åå°</a></li><li class="post-list-item"><a class="post-list-link" href="/case-study/micro-front-end/">å¾®å‰ç«¯åœ¨åŸºç¡€æ¶æ„åº”ç”¨ç³»åˆ—çš„å®è·µ</a></li><li class="post-list-item"><a class="post-list-link" href="/case-study/spider-challenge/">çˆ¬è™«æ”»é˜²æˆ˜ ğŸ•·</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> å…¶ä»–é“¾æ¥</i></div><ul></ul><a href="https://github.com/ykzhukian/notebook" title="ä»£ç ç›¸å…³çš„ç¬”è®°" target="_blank">ä»£ç ç›¸å…³çš„ç¬”è®°</a><ul></ul><a href="https://github.com/ykzhukian" title="GitHub" target="_blank">GitHub</a><ul></ul><a href="https://www.instagram.com/kianykz/" title="Instagram" target="_blank">Instagram</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Â© 2022 <a href="/." rel="nofollow">Kian Zhu</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><script type="text/javascript" src="/js/copycode.js" successtext="å¤åˆ¶æˆåŠŸ!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>