<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=""><title>RxJS ä¸‡ç‰©çš†å¯ Stream ğŸŒŠ | å®ˆå¾—äº‘å¼€ä¸è§æœˆ</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/8.0.1/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.1/pure-min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.1/grids-responsive-min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/3.4.1/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><script type="text/javascript" src="//lib.baomitu.com/clipboard.js/2.0.4/clipboard.min.js"></script><script type="text/javascript" src="//lib.baomitu.com/toastr.js/2.1.4/toastr.min.js"></script><link rel="stylesheet" href="//lib.baomitu.com/toastr.js/2.1.4/toastr.min.css"><meta name="generator" content="Hexo 4.2.1"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">RxJS ä¸‡ç‰©çš†å¯ Stream ğŸŒŠ</h1><a id="logo" href="/.">å®ˆå¾—äº‘å¼€ä¸è§æœˆ</a><p class="description"></p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> é¦–é¡µ</i></a><a href="/archives/"><i class="fa fa-archive"> å½’æ¡£</i></a><a href="/about/"><i class="fa fa-user"> å…³äº</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">RxJS ä¸‡ç‰©çš†å¯ Stream ğŸŒŠ</h1><div class="post-meta">2020-09-20<span> | </span><span class="category"><a href="/categories/Development/">Development</a></span></div><a class="disqus-comment-count" data-disqus-identifier="fe/JavaScript/7.rxjs/" href="/fe/JavaScript/7.rxjs/#disqus_thread"></a><div class="post-content"><h3 id="RxJS-å“åº”å¼ç¼–ç¨‹çš„-JavaScript-å®ç°"><a href="#RxJS-å“åº”å¼ç¼–ç¨‹çš„-JavaScript-å®ç°" class="headerlink" title="RxJS å“åº”å¼ç¼–ç¨‹çš„ JavaScript å®ç°"></a>RxJS å“åº”å¼ç¼–ç¨‹çš„ JavaScript å®ç°</h3><ul>
<li>ä½¿ç”¨ <code>Observables</code> çš„å“åº”å¼ç¼–ç¨‹ï¼ˆReactive Programmingï¼‰çš„åº“ï¼Œå®ƒä½¿ç¼–å†™å¼‚æ­¥æˆ–åŸºäºå›è°ƒçš„ä»£ç æ›´å®¹æ˜“ã€‚</li>
<li>ä¸»åŠ¨è½®è¯¢æ¥è·å–ä¸Šä¸€ä¸ªä»»åŠ¡æ‰§è¡Œç»“æœçš„æ–¹å¼ç§°ä¸º <code>Proactive</code> æ–¹å¼ã€‚ç›¸å¯¹çš„ <code>Reactive</code> æ–¹å¼ï¼Œæ˜¯æŠŠä¸Šä¸€ä¸ªä»»åŠ¡æ‰§è¡Œç»“æœçš„åé¦ˆä½œä¸ºä¸€ä¸ªæ—¶é—´ï¼Œè¿™ä¸ªäº‹ä»¶çš„åˆ°æ¥ä¼šè§¦å‘ä¸‹ä¸€ä¸ªä»»åŠ¡çš„æ‰§è¡Œã€‚</li>
<li><code>å“åº”å¼ç¼–ç¨‹</code> æ˜¯ä½¿ç”¨ <code>å¼‚æ­¥æ•°æ®æµ</code> è¿›è¡Œç¼–ç¨‹ã€‚</li>
</ul>
<h4 id="Stream-æµ"><a href="#Stream-æµ" class="headerlink" title="Stream / æµ"></a>Stream / æµ</h4><p>ä½œä¸ºå“åº”å¼ç¼–ç¨‹çš„æ ¸å¿ƒï¼Œæµçš„æœ¬è´¨æ˜¯ä¸€ä¸ªæŒ‰æ—¶é—´é¡ºåºæ’åˆ—çš„è¿›è¡Œä¸­æ—¶é—´çš„åºåˆ—é›†åˆã€‚</p>
<ul>
<li>æŸç§ç±»å‹çš„å€¼</li>
<li>é”™è¯¯</li>
<li>å·²å®Œæˆçš„ä¿¡å·</li>
<li>â€“aâ€”b-câ€”dâ€”Xâ€”|-&gt;</li>
</ul>
<p>åœ¨å¸¸è§çš„å“åº”å¼ç¼–ç¨‹åº“ä¸­ï¼Œæ¯ä¸ª <code>stream</code> éƒ½ä¼šæœ‰å¤šä¸ªæ–¹æ³•ï¼Œ<code>map</code>ã€<code>filter</code>ã€<code>scan</code> ç­‰ç­‰ã€‚å½“ä½ è°ƒç”¨å…¶ä¸­ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œä¾‹å¦‚ <code>clickStream.map(f)</code>ï¼Œå®ƒå°±ä¼šåŸºäºåŸæ¥çš„ <code>click stream</code> è¿”å›ä¸€ä¸ªæ–°çš„ <code>stream</code>ã€‚å®ƒä¸ä¼šå¯¹åŸæ¥çš„ <code>click steam</code> ä½œä»»ä½•ä¿®æ”¹ã€‚è¿™ä¸ªç‰¹æ€§å°±æ˜¯ä¸å¯å˜æ€§(<code>Immutability</code>)</p>
<img class="article-image" src="/images/fe/reactive-stream.jpg" width="500" alt="å“åº”å¼ç¼–ç¨‹" />

<h4 id="è§‚å¯Ÿè€…æ¨¡å¼"><a href="#è§‚å¯Ÿè€…æ¨¡å¼" class="headerlink" title="è§‚å¯Ÿè€…æ¨¡å¼"></a>è§‚å¯Ÿè€…æ¨¡å¼</h4><p><code>è§‚å¯Ÿè€…æ¨¡å¼</code>åˆå«<code>å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼ˆPublish/Subscribeï¼‰</code>ï¼Œå®ƒæ˜¯ä¸€ç§ä¸€å¯¹å¤šçš„å…³ç³»ï¼Œè®©å¤šä¸ª<code>è§‚å¯Ÿè€…ï¼ˆObesverï¼‰</code>åŒæ—¶ç›‘å¬ä¸€ä¸ª<code>ä¸»é¢˜ï¼ˆSubjectï¼‰</code>ï¼Œè¿™ä¸ªä¸»é¢˜ä¹Ÿå°±æ˜¯<code>è¢«è§‚å¯Ÿè€…ï¼ˆObservableï¼‰</code>ï¼Œè¢«è§‚å¯Ÿè€…çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶å°±ä¼šé€šçŸ¥æ‰€æœ‰çš„è§‚å¯Ÿè€…ï¼Œä½¿å¾—å®ƒä»¬èƒ½å¤Ÿæ¥æ”¶åˆ°æ›´æ–°çš„å†…å®¹ã€‚è§‚å¯Ÿè€…æ¨¡å¼ä¸»é¢˜å’Œè§‚å¯Ÿè€…æ˜¯åˆ†ç¦»çš„ï¼Œä¸æ˜¯ä¸»åŠ¨è§¦å‘è€Œæ˜¯è¢«åŠ¨ç›‘å¬ã€‚</p>
<h4 id="è¿­ä»£å™¨æ¨¡å¼"><a href="#è¿­ä»£å™¨æ¨¡å¼" class="headerlink" title="è¿­ä»£å™¨æ¨¡å¼"></a>è¿­ä»£å™¨æ¨¡å¼</h4><p><code>è¿­ä»£å™¨ï¼ˆIteratorï¼‰æ¨¡å¼</code>åˆå«<code>æ¸¸æ ‡ï¼ˆSursorï¼‰æ¨¡å¼</code>ï¼Œè¿­ä»£å™¨å…·æœ‰ <code>next</code> æ–¹æ³•ï¼Œå¯ä»¥é¡ºåºè®¿é—®ä¸€ä¸ªèšåˆå¯¹è±¡ä¸­çš„å„ä¸ªå…ƒç´ ï¼Œè€Œä¸éœ€è¦æš´éœ²è¯¥å¯¹è±¡çš„å†…éƒ¨è¡¨ç°ã€‚è¿­ä»£å™¨æ¨¡å¼å¯ä»¥æŠŠè¿­ä»£çš„è¿‡ç¨‹ä»ä»ä¸šåŠ¡é€»è¾‘ä¸­åˆ†ç¦»å‡ºæ¥ï¼Œè¿­ä»£å™¨å°†ä½¿ç”¨è€…å’Œç›®æ ‡å¯¹è±¡éš”ç¦»å¼€æ¥ï¼Œå³ä½¿ä¸äº†è§£å¯¹è±¡çš„å†…éƒ¨æ„é€ ï¼Œä¹Ÿå¯ä»¥é€šè¿‡è¿­ä»£å™¨æä¾›çš„æ–¹æ³•é¡ºåºè®¿é—®å…¶æ¯ä¸ªå…ƒç´ ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> iterable = [<span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line"><span class="keyword">const</span> iterator = iterable[<span class="built_in">Symbol</span>.iterator]();</span><br><span class="line">iterator.next(); <span class="comment">// =&gt; &#123; value: "1", done: false&#125;</span></span><br><span class="line">iterator.next(); <span class="comment">// =&gt; &#123; value: "2", done: false&#125;</span></span><br><span class="line">iterator.next(); <span class="comment">// =&gt; &#123; value: undefined, done: true&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="RxJS-è§£å†³äº†å“ªäº›é—®é¢˜ï¼š"><a href="#RxJS-è§£å†³äº†å“ªäº›é—®é¢˜ï¼š" class="headerlink" title="RxJS è§£å†³äº†å“ªäº›é—®é¢˜ï¼š"></a>RxJS è§£å†³äº†å“ªäº›é—®é¢˜ï¼š</h3><ul>
<li>åŒæ­¥å’Œå¼‚æ­¥çš„ç»Ÿä¸€å†™æ³•</li>
<li>æ•°æ®å˜æ›´è¿‡ç¨‹çš„ç»„åˆæ‹†åˆ†</li>
<li>æ•°æ®å’Œè§†å›¾çš„ç²¾ç¡®ç»‘å®š</li>
<li>æ¡ä»¶å˜æ›´åï¼Œå¯¹åº”æ•°æ®è‡ªåŠ¨é‡æ–°è®¡ç®—</li>
</ul>
<h4 id="Observable-ï¼ˆè¢«è§‚å¯Ÿè€…ã€å¯è§‚å¯Ÿå¯¹è±¡ï¼‰"><a href="#Observable-ï¼ˆè¢«è§‚å¯Ÿè€…ã€å¯è§‚å¯Ÿå¯¹è±¡ï¼‰" class="headerlink" title="Observable ï¼ˆè¢«è§‚å¯Ÿè€…ã€å¯è§‚å¯Ÿå¯¹è±¡ï¼‰"></a>Observable ï¼ˆè¢«è§‚å¯Ÿè€…ã€å¯è§‚å¯Ÿå¯¹è±¡ï¼‰</h4><p>An observable is a function that creates an observer and attaches it to the source where<br>values are expected, for example, clicks, mouse events from a dom element or an Http<br>request, etc.</p>
<p>è¡¨ç¤ºä¸€ä¸ªæ¦‚å¿µï¼Œè¿™ä¸ªæ¦‚å¿µæ˜¯ä¸€ä¸ªå¯è°ƒç”¨çš„æœªæ¥å€¼æˆ–äº‹ä»¶çš„é›†åˆã€‚</p>
<h4 id="Observer-ï¼ˆè§‚å¯Ÿè€…ï¼‰"><a href="#Observer-ï¼ˆè§‚å¯Ÿè€…ï¼‰" class="headerlink" title="Observer ï¼ˆè§‚å¯Ÿè€…ï¼‰"></a>Observer ï¼ˆè§‚å¯Ÿè€…ï¼‰</h4><p>It is an object with next(), error() and complete() methods, that will get called when there<br>is interaction to the with the observable i.e. the source interacts for an example button<br>click, Http request, etc.</p>
<p>ä¸€ä¸ªå›è°ƒå‡½æ•°çš„é›†åˆï¼Œå®ƒçŸ¥é“å¦‚ä½•å»ç›‘å¬ç”± <code>Observable</code> æä¾›çš„å€¼ã€‚</p>
<h4 id="Subscription-ï¼ˆè®¢é˜…ï¼‰"><a href="#Subscription-ï¼ˆè®¢é˜…ï¼‰" class="headerlink" title="Subscription ï¼ˆè®¢é˜…ï¼‰"></a>Subscription ï¼ˆè®¢é˜…ï¼‰</h4><p>When the observable is created, to execute the observable we need to subscribe to it. It<br>can also be used to cancel the execution.</p>
<p>è¡¨ç¤º <code>Observable</code> çš„æ‰§è¡Œï¼Œä¸»è¦ç”¨äºå–æ¶ˆ <code>Observable</code> çš„æ‰§è¡Œã€‚</p>
<h4 id="Operators-ï¼ˆæ“ä½œç¬¦ï¼‰"><a href="#Operators-ï¼ˆæ“ä½œç¬¦ï¼‰" class="headerlink" title="Operators ï¼ˆæ“ä½œç¬¦ï¼‰"></a>Operators ï¼ˆæ“ä½œç¬¦ï¼‰</h4><p>An operator is a pure function that takes in observable as input and the output is also an<br>observable.</p>
<p>é‡‡ç”¨å‡½æ•°å¼ç¼–ç¨‹é£æ ¼çš„çº¯å‡½æ•° (<code>pure function</code>)ï¼Œä½¿ç”¨åƒ <code>map</code>ã€<code>filter</code>ã€<code>concat</code>ã€<code>flatMap</code> ç­‰è¿™æ ·çš„æ“ä½œç¬¦æ¥å¤„ç†é›†åˆã€‚</p>
<h4 id="Subject-ï¼ˆä¸»ä½“ï¼‰"><a href="#Subject-ï¼ˆä¸»ä½“ï¼‰" class="headerlink" title="Subject ï¼ˆä¸»ä½“ï¼‰"></a>Subject ï¼ˆä¸»ä½“ï¼‰</h4><p>A subject is an observable that can multicast i.e. talk to many observers. Consider a button<br>with an event listener, the function attached to the event using addlistener is called every<br>time the user clicks on the button similar functionality goes for subject too.</p>
<p>ç›¸å½“äº <code>EventEmitter</code>ï¼Œå¹¶ä¸”æ˜¯å°†å€¼æˆ–äº‹ä»¶å¤šè·¯æ¨é€ç»™å¤šä¸ª <code>Observer</code> çš„å”¯ä¸€æ–¹å¼ã€‚</p>
<h4 id="Schedulers-ï¼ˆè°ƒåº¦å™¨ï¼‰"><a href="#Schedulers-ï¼ˆè°ƒåº¦å™¨ï¼‰" class="headerlink" title="Schedulers ï¼ˆè°ƒåº¦å™¨ï¼‰"></a>Schedulers ï¼ˆè°ƒåº¦å™¨ï¼‰</h4><p>ç”¨æ¥æ§åˆ¶å¹¶å‘å¹¶ä¸”æ˜¯ä¸­å¤®é›†æƒçš„è°ƒåº¦å‘˜ï¼Œå…è®¸æˆ‘ä»¬åœ¨å‘ç”Ÿè®¡ç®—æ—¶è¿›è¡Œåè°ƒï¼Œä¾‹å¦‚ <code>setTimeout</code> æˆ– <code>requestAnimationFrame</code> æˆ–å…¶ä»–ã€‚</p>
<h4 id="Advantages-of-using-RxJS"><a href="#Advantages-of-using-RxJS" class="headerlink" title="Advantages of using RxJS"></a>Advantages of using RxJS</h4><p>The following are the advantages of using RxJS:</p>
<ul>
<li>RxJS can be used with other Javascript libraries and frameworks. It is supported<br>by javascript and also with typescript. Few examples are Angular, ReactJS, Vuejs,<br>nodejs etc.</li>
<li>RxJS is an awesome library when it comes to the handling of async tasks.RxJS uses<br>observables to work with reactive programming that deals with asynchronous data<br>calls, callbacks and event-based programs.</li>
<li>RxJS offers a huge collection of operators in mathematical, transformation,<br>filtering, utility, conditional, error handling, join categories that makes life easy<br>when used with reactive programming.</li>
</ul>
<h4 id="Disadvantages-of-using-RxJS"><a href="#Disadvantages-of-using-RxJS" class="headerlink" title="Disadvantages of using RxJS"></a>Disadvantages of using RxJS</h4><p>The following are the disadvantages of using RxJS:</p>
<ul>
<li>Debugging the code with observables is little difficult.</li>
<li>As you start to use Observables, you can end up your full code wrapped under the<br>observables.</li>
</ul>
<h3 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h3><h4 id="Observer-Observable-ä¸-Subscription-ç¤ºä¾‹"><a href="#Observer-Observable-ä¸-Subscription-ç¤ºä¾‹" class="headerlink" title="Observer, Observable ä¸ Subscription ç¤ºä¾‹"></a>Observer, Observable ä¸ Subscription ç¤ºä¾‹</h4><p><code>Observable</code> æ˜¯å¤šä¸ªå€¼çš„æƒ°æ€§æ¨é€é›†åˆã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Observable &#125; <span class="keyword">from</span> <span class="string">'rxjs'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> observable = Observable.create(<span class="function"><span class="params">observer</span> =&gt;</span> &#123;</span><br><span class="line">  observer.next(<span class="string">'foo'</span>);</span><br><span class="line">  observer.next(<span class="string">'bar'</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> subscription = observable.subscribe(<span class="built_in">console</span>.log);</span><br><span class="line">subscription.unsubscrible();</span><br></pre></td></tr></table></figure>

<h4 id="Subject-æ˜¯ä¸€ç§ç‰¹æ®Šçš„-Observableï¼Œå®ƒå…è®¸å°†å€¼å¤šæ’­ç»™å¤šä¸ªè§‚å¯Ÿè€…"><a href="#Subject-æ˜¯ä¸€ç§ç‰¹æ®Šçš„-Observableï¼Œå®ƒå…è®¸å°†å€¼å¤šæ’­ç»™å¤šä¸ªè§‚å¯Ÿè€…" class="headerlink" title="Subject æ˜¯ä¸€ç§ç‰¹æ®Šçš„ Observableï¼Œå®ƒå…è®¸å°†å€¼å¤šæ’­ç»™å¤šä¸ªè§‚å¯Ÿè€…"></a>Subject æ˜¯ä¸€ç§ç‰¹æ®Šçš„ Observableï¼Œå®ƒå…è®¸å°†å€¼å¤šæ’­ç»™å¤šä¸ªè§‚å¯Ÿè€…</h4><p>ä»è§‚å¯Ÿè€…çš„è§’åº¦è€Œè¨€ï¼Œå®ƒæ— æ³•åˆ¤æ–­ <code>Observable</code> æ‰§è¡Œæ˜¯æ¥è‡ªæ™®é€šçš„ <code>Observable</code> è¿˜æ˜¯ <code>Subject</code> ã€‚</p>
<p><code>Subject</code> æ˜¯ä¸€ä¸ªæœ‰å¦‚ä¸‹æ–¹æ³•çš„å¯¹è±¡ï¼š <code>next(v)</code>ã€ <code>error(e)</code> å’Œ <code>complete()</code> ã€‚è¦ç»™ <code>Subject</code> æä¾›æ–°å€¼ï¼Œåªè¦è°ƒç”¨ <code>next(theValue)</code> æ–¹æ³•ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> subject = <span class="keyword">new</span> Rx.Subject();</span><br><span class="line"></span><br><span class="line">subject.subscribe(&#123;</span><br><span class="line">  next: <span class="function">(<span class="params">v</span>) =&gt;</span> <span class="built_in">console</span>.log(<span class="string">'observerA: '</span> + v)</span><br><span class="line">&#125;);</span><br><span class="line">subject.subscribe(&#123;</span><br><span class="line">  next: <span class="function">(<span class="params">v</span>) =&gt;</span> <span class="built_in">console</span>.log(<span class="string">'observerB: '</span> + v)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">subject.next(<span class="number">1</span>);</span><br><span class="line">subject.next(<span class="number">2</span>);</span><br></pre></td></tr></table></figure>

<h4 id="Operators-æ“ä½œç¬¦æ˜¯å‡½æ•°ï¼Œå®ƒåŸºäºå½“å‰çš„-Observable-åˆ›å»ºä¸€ä¸ªæ–°çš„-Observableã€‚è¿™æ˜¯ä¸€ä¸ªæ— å‰¯ä½œç”¨çš„æ“ä½œï¼šå‰é¢çš„-Observable-ä¿æŒä¸å˜ã€‚"><a href="#Operators-æ“ä½œç¬¦æ˜¯å‡½æ•°ï¼Œå®ƒåŸºäºå½“å‰çš„-Observable-åˆ›å»ºä¸€ä¸ªæ–°çš„-Observableã€‚è¿™æ˜¯ä¸€ä¸ªæ— å‰¯ä½œç”¨çš„æ“ä½œï¼šå‰é¢çš„-Observable-ä¿æŒä¸å˜ã€‚" class="headerlink" title="Operators æ“ä½œç¬¦æ˜¯å‡½æ•°ï¼Œå®ƒåŸºäºå½“å‰çš„ Observable åˆ›å»ºä¸€ä¸ªæ–°çš„ Observableã€‚è¿™æ˜¯ä¸€ä¸ªæ— å‰¯ä½œç”¨çš„æ“ä½œï¼šå‰é¢çš„ Observable ä¿æŒä¸å˜ã€‚"></a>Operators æ“ä½œç¬¦æ˜¯å‡½æ•°ï¼Œå®ƒåŸºäºå½“å‰çš„ Observable åˆ›å»ºä¸€ä¸ªæ–°çš„ Observableã€‚è¿™æ˜¯ä¸€ä¸ªæ— å‰¯ä½œç”¨çš„æ“ä½œï¼šå‰é¢çš„ Observable ä¿æŒä¸å˜ã€‚</h4><p><a href="https://rxmarbles.com/" target="_blank" rel="noopener">marble diagramï¼ˆå®çŸ³å›¾/å¼¹ç å›¾ï¼‰</a></p>
<p><code>RxJS 6</code> åŠæ›´æ–°ç‰ˆæœ¬æä¾›äº†å¯é“¾å¼è°ƒç”¨ï¼ˆ<code>Pipeable</code>ï¼‰çš„ <code>RxJS</code> æ“ä½œç¬¦ï¼Œå‡è®¾ <code>source</code> æ˜¯ä¸€ä¸ªå·²å®šä¹‰çš„ <code>observable</code>ï¼Œä¸€ä¸ªç®€å•ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">source.pipe(</span><br><span class="line">  map(<span class="function"><span class="params">x</span> =&gt;</span> x + x),</span><br><span class="line">  mergeMap(<span class="function"><span class="params">n</span> =&gt;</span> <span class="keyword">of</span>(n + <span class="number">1</span>, n + <span class="number">2</span>).pipe(</span><br><span class="line">    filter(<span class="function"><span class="params">x</span> =&gt;</span> x % <span class="number">1</span> == <span class="number">0</span>),</span><br><span class="line">    scan(<span class="function">(<span class="params">acc, x</span>) =&gt;</span> acc + x, <span class="number">0</span>),</span><br><span class="line">  )),</span><br><span class="line">  catchError(<span class="function"><span class="params">err</span> =&gt;</span> <span class="keyword">of</span>(<span class="string">'error found'</span>)),</span><br><span class="line">).subscribe(<span class="built_in">console</span>.log);</span><br></pre></td></tr></table></figure>

<h4 id="Schedulers"><a href="#Schedulers" class="headerlink" title="Schedulers"></a>Schedulers</h4><p>è°ƒåº¦å™¨æ§åˆ¶ç€ä½•æ—¶å¯åŠ¨ <code>subscription</code> å’Œä½•æ—¶å‘é€é€šçŸ¥ã€‚ä½¿ç”¨ <code>subscribeOn</code> æ¥è°ƒåº¦ <code>subscribe()</code> è°ƒç”¨åœ¨ä»€ä¹ˆæ ·çš„ä¸Šä¸‹æ–‡ä¸­æ‰§è¡Œã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>Observable</code> çš„ <code>subscribe()</code> è°ƒç”¨ä¼šç«‹å³åŒæ­¥åœ°æ‰§è¡Œã€‚ç„¶è€Œï¼Œä½ å¯èƒ½ä¼šå»¶è¿Ÿæˆ–å®‰æ’åœ¨ç»™å®šçš„è°ƒåº¦å™¨ä¸Šæ‰§è¡Œå®é™…çš„ <code>subscription</code> ï¼Œä½¿ç”¨å®ä¾‹æ“ä½œç¬¦ <code>observeOn(scheduler)</code>ï¼Œå…¶ä¸­ <code>scheduler</code> æ˜¯ä½ æä¾›çš„å‚æ•°ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> observable = Rx.Observable.create(<span class="function"><span class="keyword">function</span> (<span class="params">proxyObserver</span>) </span>&#123;</span><br><span class="line">  proxyObserver.next(<span class="number">1</span>);</span><br><span class="line">  proxyObserver.next(<span class="number">2</span>);</span><br><span class="line">  proxyObserver.next(<span class="number">3</span>);</span><br><span class="line">  proxyObserver.complete();</span><br><span class="line">&#125;)</span><br><span class="line">.observeOn(Rx.Scheduler.async);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> finalObserver = &#123;</span><br><span class="line">  next: <span class="function"><span class="params">x</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">'got value '</span> + x),</span><br><span class="line">  error: <span class="function"><span class="params">err</span> =&gt;</span> <span class="built_in">console</span>.error(<span class="string">'something wrong occurred: '</span> + err),</span><br><span class="line">  complete: <span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">'done'</span>),</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'just before subscribe'</span>);</span><br><span class="line">observable.subscribe(finalObserver);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'just after subscribe'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// before</span></span><br><span class="line"><span class="comment">// after</span></span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="comment">// 2</span></span><br><span class="line"><span class="comment">// 3</span></span><br><span class="line"><span class="comment">// done</span></span><br></pre></td></tr></table></figure>

<h4 id="å°†æ•°ç»„è½¬åŒ–ä¸º-Observable"><a href="#å°†æ•°ç»„è½¬åŒ–ä¸º-Observable" class="headerlink" title="å°†æ•°ç»„è½¬åŒ–ä¸º Observable"></a>å°†æ•°ç»„è½¬åŒ–ä¸º Observable</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="keyword">from</span> &#125; <span class="keyword">from</span> <span class="string">'rxjs'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> array = [<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>];</span><br><span class="line"><span class="keyword">const</span> result = <span class="keyword">from</span>(array);</span><br><span class="line"></span><br><span class="line">result.subscribe(<span class="function"><span class="params">x</span> =&gt;</span> <span class="built_in">console</span>.log(x));</span><br></pre></td></tr></table></figure>

<h4 id="Hot-Observable-ä¸-Cold-Observable"><a href="#Hot-Observable-ä¸-Cold-Observable" class="headerlink" title="Hot Observable ä¸ Cold Observable"></a>Hot Observable ä¸ Cold Observable</h4><ul>
<li>Hot Observable æ— è®ºæœ‰æ²¡æœ‰ Subscriber è®¢é˜…ï¼Œäº‹ä»¶å§‹ç»ˆéƒ½ä¼šå‘ç”Ÿã€‚å½“ Hot Observable æœ‰å¤šä¸ªè®¢é˜…è€…æ—¶ï¼ŒHot Observable ä¸è®¢é˜…è€…ä»¬çš„å…³ç³»æ˜¯ä¸€å¯¹å¤šçš„å…³ç³»ï¼Œå¯ä»¥ä¸å¤šä¸ªè®¢é˜…è€…å…±äº«ä¿¡æ¯ã€‚</li>
<li>ç„¶è€Œï¼ŒCold Observable åªæœ‰ Subscriber è®¢é˜…æ—¶ï¼Œæ‰å¼€å§‹æ‰§è¡Œå‘å°„æ•°æ®æµçš„ä»£ç ã€‚å¹¶ä¸” Cold Observable å’Œ Subscriber åªèƒ½æ˜¯ä¸€å¯¹ä¸€çš„å…³ç³»ï¼Œå½“æœ‰å¤šä¸ªä¸åŒçš„è®¢é˜…è€…æ—¶ï¼Œæ¶ˆæ¯æ˜¯é‡æ–°å®Œæ•´å‘é€çš„ã€‚ä¹Ÿå°±æ˜¯è¯´å¯¹ Cold Observable è€Œè¨€ï¼Œæœ‰å¤šä¸ªSubscriberçš„æ—¶å€™ï¼Œä»–ä»¬å„è‡ªçš„äº‹ä»¶æ˜¯ç‹¬ç«‹çš„ã€‚</li>
</ul>
<h3 id="Others"><a href="#Others" class="headerlink" title="Others"></a>Others</h3><p>Observable å°±æ˜¯ Promise++ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> stream = Rx.Observable.fromPromise(promise)</span><br></pre></td></tr></table></figure>

<p>Metastreamï¼šåŒ…å« Stream çš„ Streamï¼Œå¯ä»¥æŠŠå®ƒæƒ³åƒä¸º pointersï¼šæ¯ä¸ªæ˜ å°„çš„å€¼éƒ½æ˜¯ä¸€ä¸ªæŒ‡å‘å…¶å®ƒ Stream çš„æŒ‡é’ˆã€‚</p>
<h3 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><ul>
<li><a href="https://wiki.jikexueyuan.com/project/android-weekly/issue-145/introduction-to-RP.html" target="_blank" rel="noopener">RP å“åº”å¼ç¼–ç¨‹</a></li>
</ul>
</div><div class="tags"><a href="/tags/JavaScript/"><i class="fa fa-tag"></i>JavaScript</a></div><div class="post-nav"><a class="pre" href="/fe/IDE/2.vscode-snippets/">VSCode é”®ç›˜å¿«æ·é”®æ’å…¥ä»£ç </a><a class="next" href="/fe/Vue/2.vue-3/">Vue 3.0</a></div><div id="disqus_thread"><div class="btn_click_load"><button class="disqus_click_btn">é˜…è¯»è¯„è®ºï¼ˆè¯·ç¡®ä¿ Disqus å¯ä»¥æ­£å¸¸åŠ è½½ï¼‰</button></div><script type="text/javascript">var disqus_config = function () {
    this.page.url = 'https://ykzhukian.github.io/fe/JavaScript/7.rxjs/';
    this.page.identifier = 'fe/JavaScript/7.rxjs/';
    this.page.title = 'RxJS ä¸‡ç‰©çš†å¯ Stream ğŸŒŠ';
  };</script><script type="text/javascript" id="disqus-lazy-load-script">$.ajax({
url: 'https://disqus.com/next/config.json',
timeout: 2500,
type: 'GET',
success: function(){
  var d = document;
  var s = d.createElement('script');
  s.src = '//ykzhukian-github-io.disqus.com/embed.js';
  s.setAttribute('data-timestamp', + new Date());
  (d.head || d.body).appendChild(s);
  $('.disqus_click_btn').css('display', 'none');
},
error: function() {
  $('.disqus_click_btn').css('display', 'block');
}
});</script><script type="text/javascript" id="disqus-click-load">$('.btn_click_load').click(() => {  //click to load comments
    (() => { // DON'T EDIT BELOW THIS LINE
        var d = document;
        var s = d.createElement('script');
        s.src = '//ykzhukian-github-io.disqus.com/embed.js';
        s.setAttribute('data-timestamp', + new Date());
        (d.head || d.body).appendChild(s);
    })();
    $('.disqus_click_btn').css('display','none');
});</script><script type="text/javascript" id="disqus-count-script">$(function() {
     var xhr = new XMLHttpRequest();
     xhr.open('GET', '//disqus.com/next/config.json', true);
     xhr.timeout = 2500;
     xhr.onreadystatechange = function () {
       if (xhr.readyState === 4 && xhr.status === 200) {
         $('.post-meta .post-comments-count').show();
         var s = document.createElement('script');
         s.id = 'dsq-count-scr';
         s.src = 'https://ykzhukian-github-io.disqus.com/count.js';
         s.async = true;
         (document.head || document.body).appendChild(s);
       }
     };
     xhr.ontimeout = function () { xhr.abort(); };
     xhr.send(null);
   });
</script></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> åˆ†ç±»</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Case-Study/">Case Study</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Development/">Development</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Nonsense/">Nonsense</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Photograph/">Photograph</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Reading-Notes/">Reading Notes</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> æ ‡ç­¾</i></div><div class="tagcloud"><a href="/tags/JavaScript/" style="font-size: 15px;">JavaScript</a> <a href="/tags/React/" style="font-size: 15px;">React</a> <a href="/tags/DevOps/" style="font-size: 15px;">DevOps</a> <a href="/tags/Tools/" style="font-size: 15px;">Tools</a> <a href="/tags/Read/" style="font-size: 15px;">Read</a> <a href="/tags/Git/" style="font-size: 15px;">Git</a> <a href="/tags/Vue/" style="font-size: 15px;">Vue</a> <a href="/tags/Webpack/" style="font-size: 15px;">Webpack</a> <a href="/tags/CSS/" style="font-size: 15px;">CSS</a> <a href="/tags/Design/" style="font-size: 15px;">Design</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> æœ€è¿‘æ–‡ç« </i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/noncence/20220406/">ç–«æƒ…ä¸‹å¦ˆå¦ˆçš„ç”Ÿæ—¥</a></li><li class="post-list-item"><a class="post-list-link" href="/fe/React/4.react-18/">React 18 is now available on npm</a></li><li class="post-list-item"><a class="post-list-link" href="/noncence/20220202-daily/">PR è¿‡æœŸäº†</a></li><li class="post-list-item"><a class="post-list-link" href="/fe/JavaScript/14.mouse-track/">å‰ç«¯åçˆ¬ï¼šé¼ æ ‡è½¨è¿¹</a></li><li class="post-list-item"><a class="post-list-link" href="/noncence/20220127-daily/">å¬äº†è€æ¿å»ºç¡•çš„ä¸€ä¸ªåˆ†äº«</a></li><li class="post-list-item"><a class="post-list-link" href="/webpack/3.webpack-base/">ä¸€äº› Webpack ç›¸å…³å¤‡å¿˜</a></li><li class="post-list-item"><a class="post-list-link" href="/photo/2.2022-qingdao/">é’å²›è·¨å¹´</a></li><li class="post-list-item"><a class="post-list-link" href="/fe/Engineering/1.private-npm-nexus/">ç§æœ‰ npm ä»“åº“ Nexus & å·¥å…·åº“é…åˆ GitLab è‡ªåŠ¨å‘å¸ƒ</a></li><li class="post-list-item"><a class="post-list-link" href="/reading/7.meituan-micro-fe/">ç¨€åœŸå¤§ä¼šè®°å½•</a></li><li class="post-list-item"><a class="post-list-link" href="/case-study/shield/">ç™¾å§“ç½‘åçˆ¬è™«ç³»ç»Ÿï¼šç¥ç›¾ç®¡ç†åå°</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> å…¶ä»–é“¾æ¥</i></div><ul></ul><a href="https://github.com/ykzhukian/notebook" title="ä»£ç ç›¸å…³çš„ç¬”è®°" target="_blank">ä»£ç ç›¸å…³çš„ç¬”è®°</a><ul></ul><a href="https://github.com/ykzhukian" title="GitHub" target="_blank">GitHub</a><ul></ul><a href="https://www.instagram.com/kianykz/" title="Instagram" target="_blank">Instagram</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Â© 2022 <a href="/." rel="nofollow">Kian Zhu</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><script type="text/javascript" src="/js/copycode.js" successtext="å¤åˆ¶æˆåŠŸ!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>